{% extends 'base.html' %}

{% block title %}{% if payment %}Edit{% else %}Tambah{% endif %} Payment{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">{% if payment %}Edit{% else %}Tambah{% endif %} Payment</h5>
                <a href="{% url 'payments_list' %}" class="btn btn-secondary btn-sm">
                    <i class="bx bx-arrow-back"></i> Kembali
                </a>
            </div>
            <div class="card-body">
                <form method="POST">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label class="form-label" for="user">User</label>
                        <select class="form-select" id="user" name="user" required>
                            <option value="">Pilih User</option>
                            {% for u in users %}
                            <option value="{{ u.id }}" {% if payment and payment.user.id == u.id %}selected{% endif %}>
                                {{ u.name }} - {{ u.email }}
                            </option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label" for="amount">Amount</label>
                        <input type="number" class="form-control" id="amount" name="amount" 
                               placeholder="100000" step="0.01"
                               value="{% if payment %}{{ payment.amount }}{% endif %}" required />
                        <small class="text-muted">Masukkan nominal dalam rupiah</small>
                    </div>
                    <div class="mb-3">
                        <label class="form-label" for="payment_method">Payment Method</label>
                        <input type="text" class="form-control" id="payment_method" name="payment_method" 
                               placeholder="Transfer Bank / Cash / E-Wallet" 
                               value="{% if payment %}{{ payment.payment_method }}{% endif %}" />
                    </div>
                    <div class="mb-3">
                        <label class="form-label" for="status">Status</label>
                        <select class="form-select" id="status" name="status" required>
                            <option value="pending" {% if payment and payment.status == 'pending' %}selected{% endif %}>Pending</option>
                            <option value="success" {% if payment and payment.status == 'success' %}selected{% endif %}>Success</option>
                            <option value="failed" {% if payment and payment.status == 'failed' %}selected{% endif %}>Failed</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label" for="description">Description</label>
                        <textarea class="form-control" id="description" name="description" 
                                  rows="3" placeholder="Keterangan pembayaran">{% if payment %}{{ payment.description }}{% endif %}</textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="bx bx-save"></i> Simpan
                    </button>
                    <a href="{% url 'payments_list' %}" class="btn btn-outline-secondary">
                        Batal
                    </a>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}